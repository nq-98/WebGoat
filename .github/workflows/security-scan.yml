semgrep_sast_scan:
  # The job ID (semgrep_sast_scan) is used for referencing this job, while 'name' is the display title in the GitHub UI. [cite: 18]
  [cite_start]name: Semgrep SAST Scan [cite: 20]
  [cite_start]runs-on: ubuntu-latest [cite: 21]
  steps:
    # Step 1: Check out the repository's code so the workflow can access it. [cite: 23]
    - [cite_start]name: Checkout code [cite: 24]
      [cite_start]uses: actions/checkout@v4 [cite: 25]

    # Step 2: Run the Semgrep SAST scan using its official Docker image. [cite: 26]
    # This command mounts the current directory into the container and tells Semgrep to scan it. [cite: 27]
    # The results are output in JSON format to a file named 'semgrep-results.json'. [cite: 28]
    - [cite_start]name: Run Semgrep Scan [cite: 29]
      run: |
        docker run --rm -v "$(pwd):/src" semgrep/semgrep semgrep scan /src --json -o semgrep-results.json [cite: 31]

    # Provide a better view of the output [cite: 32]
    - [cite_start]name: Pretty-print Semgrep JSON [cite: 33]
      [cite_start]run: jq . semgrep-results.json [cite: 34]

    # Step 3: Upload the JSON report as a build artifact. [cite: 35]
    # This makes the results available for download from the workflow run's summary page. [cite: 36]
    - [cite_start]name: Upload Semgrep results [cite: 37]
      [cite_start]uses: actions/upload-artifact@v4 [cite: 38]
      with:
        [cite_start]name: semgrep-results [cite: 40]
        [cite_start]path: semgrep-results.json [cite: 41]
